# 更新日誌 (CHANGELOG)

## [2.0.0] - 2025-07-16

### 🎯 重大更新 (Major Updates)

- **模組化重構**：將單一大型 `fortune.js` 重構為模組化架構

  - 8 個獨立資料庫模組化檔案
  - 清晰的專案目錄結構
  - 更好的程式碼可維護性
- **多層 CORS 代理系統**：實現穩定的外部 API 訪問

  - 4 層備用代理系統 (corsproxy.io, allorigins.win, cors-anywhere, proxy.cors.sh)
  - 自動故障轉移機制
  - 提升 API 呼叫成功率
- **生產環境優化**：程式碼清理與優化

  - 移除所有測試與除錯程式碼
  - 清理註解與無用變數
  - 優化載入效能

### ✨ 新增功能 (Added Features)

- **模組化資料庫** (`database/` 目錄)

  - `earthly-branch-numbers.js` - 地支數字對照
  - `gua-colors.js` - 八卦顏色對照
  - `hexagram-matrix.js` - 六十四卦矩陣
  - `i-ching-data.js` - 易經爻辭資料
  - `i-ching-lines.js` - 易經爻線資料
  - `i-ching-palace.js` - 易經宮位對照
  - `primal-bagua-map.js` - 先天八卦對照
  - `yao-ci-explanations.js` - 爻辭白話解釋
- **API 穩定性提升**

  - 多重代理備援系統
  - 智能 API 切換機制
  - 增強錯誤處理

### 🔧 修復 (Fixed)

- 修復重複載入腳本導致的變數衝突問題
- 解決 CORS 政策限制的外部 API 訪問問題
- 修正陽曆轉陰曆功能的精確度
- 優化星座資訊獲取邏輯的穩定性

### 🚀 改進 (Improved)

- 大幅提升程式碼組織結構
- 增強 API 呼叫的可靠性
- 優化使用者體驗與響應速度
- 完善錯誤處理機制

---

## [1.5.0] - 2025-07-12

### ✨ 新增功能

- 實現時間起卦系統（梅花易數）
- 網站全面改版，提升使用者介面
- 新增「待會吃什麼？」功能頁面
- 實現三層整合運勢分析系統

### 🔧 修復

- 改善占星 API 可靠性，新增多重來源與備援
- 調整 iframe 嵌入式佈局
- 修正易經占卜文字的 CSS 樣式
- 優化側邊欄導航流程

### 📝 文檔

- 新增完整的中文 README.md
- 移除 emoji 表情符號，保持介面簡潔

---

## [1.0.0] - 2025-07-10

### 🎉 首次發布

- 完整的易經占卜系統，含詳細解釋
- 基礎網站架構與導航
- 核心運勢分析功能
- 初始專案結構建立

---

## 版本說明

- **Major (主版本)**：架構重大變更或不相容更新
- **Minor (次版本)**：新功能新增，向下相容
- **Patch (修訂版)**：錯誤修復與小幅改進

## 技術棧演進

### v2.0.0 技術特色

- 🏗️ **模組化架構**：ES6 模組化設計
- 🌐 **多層代理**：4 層 CORS 代理備援
- 📅 **農曆轉換**：使用 lunar-javascript 庫
- 🎯 **時間起卦**：傳統梅花易數算法
- 🔮 **易經系統**：完整六十四卦資料庫

### v1.x 基礎功能

- 易經占卜核心邏輯
- 基礎網頁介面
- 簡單 API 整合
- 基礎運勢分析

---

_本專案致力於運用現代技術實現古典占卜的數位化呈現。_
